<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_85) on Thu Sep 15 05:13:59 EDT 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>OptimisticLockingAggregationRepository (Camel :: Core 2.17.0.redhat-630187 API)</title>
<meta name="date" content="2016-09-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OptimisticLockingAggregationRepository (Camel :: Core 2.17.0.redhat-630187 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OptimisticLockingAggregationRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/camel/spi/NodeIdFactory.html" title="interface in org.apache.camel.spi"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/camel/spi/OptimisticLockingAggregationRepository.html" target="_top">Frames</a></li>
<li><a href="OptimisticLockingAggregationRepository.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.camel.spi</div>
<h2 title="Interface OptimisticLockingAggregationRepository" class="title">Interface OptimisticLockingAggregationRepository</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../org/apache/camel/spi/AggregationRepository.html" title="interface in org.apache.camel.spi">AggregationRepository</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../org/apache/camel/processor/aggregate/MemoryAggregationRepository.html" title="class in org.apache.camel.processor.aggregate">MemoryAggregationRepository</a></dd>
</dl>
<hr>
<br>
<pre>public interface <a href="../../../../src-html/org/apache/camel/spi/OptimisticLockingAggregationRepository.html#line.33">OptimisticLockingAggregationRepository</a>
extends <a href="../../../../org/apache/camel/spi/AggregationRepository.html" title="interface in org.apache.camel.spi">AggregationRepository</a></pre>
<div class="block">A specialized <a href="../../../../org/apache/camel/spi/AggregationRepository.html" title="interface in org.apache.camel.spi"><code>AggregationRepository</code></a> which also supports
 optimistic locking.

 If the underlying implementation cannot perform optimistic locking, it should
 not implement this interface.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../org/apache/camel/processor/aggregate/MemoryAggregationRepository.html" title="class in org.apache.camel.processor.aggregate"><code>MemoryAggregationRepository</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi">OptimisticLockingAggregationRepository.OptimisticLockingException</a></strong></code>
<div class="block"><a href="http://download.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang"><code>Exception</code></a> used by an <code>AggregationRepository</code> to indicate that an optimistic
 update error has occurred and that the operation should be retried by the caller.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.html#add(org.apache.camel.CamelContext,%20java.lang.String,%20org.apache.camel.Exchange,%20org.apache.camel.Exchange)">add</a></strong>(<a href="../../../../org/apache/camel/CamelContext.html" title="interface in org.apache.camel">CamelContext</a>&nbsp;camelContext,
      <a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
      <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;oldExchange,
      <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;newExchange)</code>
<div class="block">Add the given <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel"><code>Exchange</code></a> under the correlation key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.html#remove(org.apache.camel.CamelContext,%20java.lang.String,%20org.apache.camel.Exchange)">remove</a></strong>(<a href="../../../../org/apache/camel/CamelContext.html" title="interface in org.apache.camel">CamelContext</a>&nbsp;camelContext,
            <a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
            <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;exchange)</code>
<div class="block">Removes the given Exchange when both the supplied key and Exchange are present in the repository.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.camel.spi.AggregationRepository">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.camel.spi.<a href="../../../../org/apache/camel/spi/AggregationRepository.html" title="interface in org.apache.camel.spi">AggregationRepository</a></h3>
<code><a href="../../../../org/apache/camel/spi/AggregationRepository.html#add(org.apache.camel.CamelContext,%20java.lang.String,%20org.apache.camel.Exchange)">add</a>, <a href="../../../../org/apache/camel/spi/AggregationRepository.html#confirm(org.apache.camel.CamelContext,%20java.lang.String)">confirm</a>, <a href="../../../../org/apache/camel/spi/AggregationRepository.html#get(org.apache.camel.CamelContext,%20java.lang.String)">get</a>, <a href="../../../../org/apache/camel/spi/AggregationRepository.html#getKeys()">getKeys</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="add(org.apache.camel.CamelContext, java.lang.String, org.apache.camel.Exchange, org.apache.camel.Exchange)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre><a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;<a href="../../../../src-html/org/apache/camel/spi/OptimisticLockingAggregationRepository.html#line.76">add</a>(<a href="../../../../org/apache/camel/CamelContext.html" title="interface in org.apache.camel">CamelContext</a>&nbsp;camelContext,
           <a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
           <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;oldExchange,
           <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;newExchange)
             throws <a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi">OptimisticLockingAggregationRepository.OptimisticLockingException</a></pre>
<div class="block">Add the given <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel"><code>Exchange</code></a> under the correlation key.
 <p/>
 Will perform optimistic locking to replace expected existing exchange with the new supplied exchange.
 <p/>
 If the <code>oldExchange</code> is null the underlying implementation is to assume this is the very first Exchange for the
 supplied correlation key. When the implementation comes to store to the Exchange if there is already an existing
 Exchange present for this correlation key the implementation should throw an OptimisticLockingException.
 <p/>
 If the <code>oldExchange</code> is not null the underlying implementation should use it to compare with the existing exchange
 when doing an atomic compare-and-set/swap operation.
 <p/>
 The implementation may achieve this by storing a version identifier in the Exchange as a parameter. Set before
 returning from <a href="../../../../org/apache/camel/spi/AggregationRepository.html#get(org.apache.camel.CamelContext,%20java.lang.String)"><code>AggregationRepository.get(org.apache.camel.CamelContext, String)</code></a>} and retrieved from the
 exchange when passed to <a href="../../../../org/apache/camel/spi/AggregationRepository.html#add(org.apache.camel.CamelContext,%20java.lang.String,%20org.apache.camel.Exchange)"><code>AggregationRepository.add(org.apache.camel.CamelContext, String, org.apache.camel.Exchange)</code></a>.
 <p/>
 Note: The <a href="../../../../org/apache/camel/processor/aggregate/MemoryAggregationRepository.html" title="class in org.apache.camel.processor.aggregate"><code>MemoryAggregationRepository</code></a> is an exception to this recommendation.
 It uses the <code>oldExchange</code>'s Object identify to perform it's compare-and-set/swap operation, instead of a version
 parameter. This is not the recommended approach, and should be avoided.
 <p/>
 The <a href="../../../../org/apache/camel/processor/aggregate/AggregateProcessor.html" title="class in org.apache.camel.processor.aggregate"><code>AggregateProcessor</code></a> will ensure that the exchange received from
 <a href="../../../../org/apache/camel/spi/AggregationRepository.html#get(org.apache.camel.CamelContext,%20java.lang.String)"><code>AggregationRepository.get(org.apache.camel.CamelContext, String)</code></a> is passed as <code>oldExchange</code>,
 and that the aggregated exchange received from the <a href="../../../../org/apache/camel/processor/aggregate/AggregationStrategy.html" title="interface in org.apache.camel.processor.aggregate"><code>AggregationStrategy</code></a>
 is passed as the <code>newExchange</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>camelContext</code> - the current CamelContext</dd><dd><code>key</code> - the correlation key</dd><dd><code>oldExchange</code> - the old exchange that is expected to exist when replacing with the new exchange</dd><dd><code>newExchange</code> - the new aggregated exchange, to replace old exchange</dd>
<dt><span class="strong">Returns:</span></dt><dd>the old exchange if any existed</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi">OptimisticLockingAggregationRepository.OptimisticLockingException</a></code> - This should be thrown when the currently stored exchange differs from the supplied oldExchange.</dd></dl>
</li>
</ul>
<a name="remove(org.apache.camel.CamelContext, java.lang.String, org.apache.camel.Exchange)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>remove</h4>
<pre>void&nbsp;<a href="../../../../src-html/org/apache/camel/spi/OptimisticLockingAggregationRepository.html#line.88">remove</a>(<a href="../../../../org/apache/camel/CamelContext.html" title="interface in org.apache.camel">CamelContext</a>&nbsp;camelContext,
          <a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
          <a href="../../../../org/apache/camel/Exchange.html" title="interface in org.apache.camel">Exchange</a>&nbsp;exchange)
            throws <a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi">OptimisticLockingAggregationRepository.OptimisticLockingException</a></pre>
<div class="block">Removes the given Exchange when both the supplied key and Exchange are present in the repository. If the supplied Exchange
 does not match the Exchange actually stored against the key this method should throw an OptimisticLockingException
 to indicate that the value of the correlation key has changed from the expected value.
 <p/></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../org/apache/camel/spi/AggregationRepository.html#remove(org.apache.camel.CamelContext,%20java.lang.String,%20org.apache.camel.Exchange)">remove</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/camel/spi/AggregationRepository.html" title="interface in org.apache.camel.spi">AggregationRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>camelContext</code> - the current CamelContext</dd><dd><code>key</code> - the correlation key</dd><dd><code>exchange</code> - the exchange to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi">OptimisticLockingAggregationRepository.OptimisticLockingException</a></code> - This should be thrown when the exchange has already been deleted, or otherwise modified.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OptimisticLockingAggregationRepository.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/camel/spi/NodeIdFactory.html" title="interface in org.apache.camel.spi"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/apache/camel/spi/OptimisticLockingAggregationRepository.OptimisticLockingException.html" title="class in org.apache.camel.spi"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/camel/spi/OptimisticLockingAggregationRepository.html" target="_top">Frames</a></li>
<li><a href="OptimisticLockingAggregationRepository.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Apache Camel</small></p>
</body>
</html>
